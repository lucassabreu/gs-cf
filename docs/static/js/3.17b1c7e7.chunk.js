webpackJsonp([3],{106:function(e,t,n){"use strict";function a(e,t,n,a){t=Math.abs(t),t=isNaN(t)?2:t,n=void 0===n?".":n,a=void 0===a?",":a;var r=e<0?"-":"",o=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t),10)),l=o.length;return l=l>3?l%3:0,r+(l?o.substr(0,l)+a:"")+o.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?n+Math.abs(e-o).toFixed(t).slice(2):"")}t.a=a},107:function(e,t,n){"use strict";function a(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:"100%"}}))))}t.a=a;var r=n(0),o=n.n(r)},121:function(e,t,n){"use strict";function a(e){var t=e.getDate(),n=e.getMonth()+1;return r(t)+"/"+r(n)+"/"+e.getFullYear()}function r(e){return e<10?"0"+e:e}t.a=a},135:function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var l=t[r](o),s=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(18),l=n.n(o),s=n(37),i=n(19),c=n(136),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),h=function(){function e(t){var n=t.sheetId;r(this,e),this.sheetId=null,this.sheetId=n}return u(e,[{key:"getSheetId",value:function(){return this.sheetId}},{key:"getAll",value:function(){function e(){return t.apply(this,arguments)}var t=a(l.a.mark(function e(){var t,n,a,r,o,c,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.initSheetsAPI();case 2:return e.next=4,Object(s.a)(gapi.client.sheets.spreadsheets.values.get({spreadsheetId:this.sheetId,range:"A:E"}));case 4:t=e.sent,n=t.result.values.slice(1),a=[];for(r in n)o=n[r],c=o[0].split("/"),u=new Date(c[2],c[1]-1,c[0]),o[3]=o[3].trim().replace(/,/,""),a.push({_id:r+1,date:u,category:o[1],description:o[2],value:("-"===o[3][0]?-1:1)*parseFloat(o[3].split(" ").slice(-1)[0]),origin:o[4]});return e.abrupt("return",a.filter(function(e){return 0!==e.value}));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMovements",value:function(){function e(e){return t.apply(this,arguments)}var t=a(l.a.mark(function e(t){var n,a=t.month,r=t.start,o=t.end;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAll();case 2:return n=e.sent,a&&(n=n.filter(function(e){return e.date.getFullYear()===a.getFullYear()&&e.date.getMonth()===a.getMonth()})),r&&(n=n.filter(function(e){return e.date>=r})),o&&(o=new Date(o.getTime()),o=new Date(o.setMonth(o.getMonth()+1)),n=n.filter(function(e){return e.date<o})),e.abrupt("return",n.map(function(e){return new c.a(e._id,new Date(e.date),e.category,e.description,e.value,e.origin)}));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMonths",value:function(){function e(e){return t.apply(this,arguments)}var t=a(l.a.mark(function e(t){var n,a=t.start,r=t.end,o=t.month;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getMovements({});case 3:return e.t1=e.sent,n=e.t0.reduceToMonth.call(e.t0,e.t1),o&&(n=n.filter(function(e){return e.month.getFullYear()===o.getFullYear()&&e.month.getMonth()===o.getMonth()})),a&&(n=n.filter(function(e){return e.month>=a})),r&&(r=new Date(r.getTime()),r=new Date(r.setMonth(r.getMonth()+1)),n=n.filter(function(e){return e.month<r})),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"reduceToMonth",value:function(e){var t=e.reduce(function(e,t){var n=parseInt(t.getMonthString().replace(/-/,""),10);void 0===e[n]&&(e[n]={month:t.getMonth(),key:n,balance:0,credit:0,debit:0,movements:[]});var a=t.getValue();return e[n][a<0?"debit":"credit"]+=a,e[n].balance+=t.value,e[n].movements.push(t),e},{}),n=[];for(var a in t)n.push(t[a]);n=n.sort(function(e,t){return e.key-t.key});for(a in n){var r=n[a],o=n[a-1];r.prev=o,r.initial=o?o.final:0,r.final=r.initial+r.balance}return n}}]),e}();t.a=h},136:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,n,r,o,l,s){if(a(this,e),this.id=null,this.date=null,this.category=null,this.description=null,this.value=null,this.origin=null,!(n instanceof Date))throw new Error(n);this.id=t,this.date=n,this.category=r,this.description=o,this.value=l,this.origin=s}return r(e,[{key:"getMonth",value:function(){return new Date(this.date.getFullYear(),this.date.getMonth()+1,0)}},{key:"getMonthString",value:function(){var e=this.date.getMonth();return this.date.getFullYear()+"-"+(e>9?e:"0"+e)}},{key:"getValue",value:function(){return"Pagamento de cart\xe3o"===this.category||"Resgate"===this.category||"Aplica\xe7\xe3o"===this.category||"Transfer\xeancia"===this.category?0:this.value}}]),e}();t.a=o},137:function(e,t,n){"use strict";function a(e){var t=e.loading,n=e.movements,a=e.className,r=Object(i.a)(n);return t?o.a.createElement(l.a,null):o.a.createElement("form",{className:"row "+a,style:{textAlign:"center"}},o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"col-form-label"},o.a.createElement("strong",null,"Cr\xe9ditos")),o.a.createElement("div",null,Object(s.a)(r.totalCredit,2,",",".")))),o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"col-form-label"},o.a.createElement("strong",null,"D\xe9bitos")),o.a.createElement("div",null,Object(s.a)(r.totalDebit,2,",",".")))),o.a.createElement("div",{className:"col-4"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"col-form-label"},o.a.createElement("strong",null,"Total")),o.a.createElement("div",null,Object(s.a)(r.total,2,",",".")))))}var r=n(0),o=n.n(r),l=n(107),s=n(106),i=n(138),c=n(1),u=n.n(c);a.propTypes={loading:u.a.bool,movements:u.a.array,className:u.a.string},t.a=a},138:function(e,t,n){"use strict";function a(e){return e.reduce(function(e,t){return e.total+=t.value,t.value<0?(e.totalDebit-=t.value,e):(e.totalCredit+=t.value,e)},{totalDebit:0,totalCredit:0,total:0})}t.a=a},177:function(e,t,n){"use strict";function a(e){var t=e.className,n=e.loading,a=e.months,r=e.sheetId;return n?o.a.createElement(i.a,null):(a=a.concat().sort(function(e,t){return t.month-e.month}),o.a.createElement("table",{className:t+" monthlyTable table table-sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Month"),o.a.createElement("th",{className:"text-right"},"Initial"),o.a.createElement("th",{className:"text-right"},"Credit"),o.a.createElement("th",{className:"text-right"},"Debit"),o.a.createElement("th",{className:"text-right"},"Balance"),o.a.createElement("th",{className:"text-right"},"Final"),o.a.createElement("th",null))),o.a.createElement("tbody",null,a.filter(function(e){return e}).map(function(e){var t=e.balance>0?"lineGreen":"lineRed";return o.a.createElement("tr",{key:e.month,className:t},o.a.createElement("td",null,Object(s.a)(e.month)),o.a.createElement("td",{className:"text-right"},Object(l.a)(e.initial,2,",",".")),o.a.createElement("td",{className:"text-right"},Object(l.a)(e.credit,2,",",".")),o.a.createElement("td",{className:"text-right"},Object(l.a)(e.debit,2,",",".")),o.a.createElement("td",{className:"text-right"},Object(l.a)(e.balance,2,",",".")),o.a.createElement("td",{className:"text-right"},Object(l.a)(e.final,2,",",".")),o.a.createElement("td",null,o.a.createElement(u.b,{to:"/sheet/"+r+"/"+f(e.month)},o.a.createElement("i",{className:"material-icons"},"list"))))}))))}var r=n(0),o=n.n(r),l=n(106),s=n(121),i=n(107),c=n(178),u=(n.n(c),n(6)),h=n(1),m=n.n(h),f=function(e){return e.getFullYear()+"-"+(e.getMonth()>9?"0":"")+(e.getMonth()+1)};a.propTypes={className:m.a.string,loading:m.a.bool,months:m.a.array,sheetId:m.a.string},t.a=a},178:function(e,t,n){var a=n(179);"string"===typeof a&&(a=[[e.i,a,""]]);var r={};r.transform=void 0;n(87)(a,r);a.locals&&(e.exports=a.locals)},179:function(e,t,n){t=e.exports=n(86)(!0),t.push([e.i,".monthlyTable .lineGreen{background-color:#91dc91}.monthlyTable .lineRed{background-color:#f57878}","",{version:3,sources:["/home/lucas/workspace/lucassabreu/gs-cf/src/Sheet/MonthlyTable.css"],names:[],mappings:"AAAA,yBACE,wBAA0B,CAC3B,AAED,uBACE,wBAA0B,CAC3B",file:"MonthlyTable.css",sourcesContent:[".monthlyTable .lineGreen {\n  background-color: #91dc91;\n}\n\n.monthlyTable .lineRed {\n  background-color: #f57878;\n}\n"],sourceRoot:""}])},509:function(e,t,n){var a=n(510);"string"===typeof a&&(a=[[e.i,a,""]]);var r={};r.transform=void 0;n(87)(a,r);a.locals&&(e.exports=a.locals)},510:function(e,t,n){t=e.exports=n(86)(!0),t.push([e.i,".table td,.table th{text-align:left}","",{version:3,sources:["/home/lucas/workspace/lucassabreu/gs-cf/src/SheetHome.css"],names:[],mappings:"AAAA,oBACE,eAAiB,CAClB",file:"SheetHome.css",sourcesContent:[".table td, .table th {\n  text-align: left;\n}"],sourceRoot:""}])},90:function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var l=t[r](o),s=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(18),i=n.n(s),c=n(0),u=n.n(c),h=n(135),m=n(509),f=(n.n(m),n(177)),d=n(137),v=n(107),p=n(1),g=n.n(p),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(e,n){var a=n.router;r(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.state={router:a,sheetId:e.match.params.id,error:null,loading:!0,movements:[],months:[],activeTab:"totals"},l.service=new h.a({sheetId:l.state.sheetId}),l.toogleTab=l.toogleTab.bind(l),l}return l(t,e),b(t,[{key:"toogleTab",value:function(e){this.setState({activeTab:e})}},{key:"componentWillMount",value:function(){this.state.loading&&this.updateMovements()}},{key:"updateMovements",value:function(){function e(){return t.apply(this,arguments)}var t=a(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.service.getMovements({});case 3:return e.t1=e.sent,e.next=6,this.service.getMonths({});case 6:e.t2=e.sent,e.t3={movements:e.t1,months:e.t2,loading:!1},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=function(e){var t=e.children;return u.a.createElement("div",{className:"card-body"},t)};return this.state.loading?u.a.createElement("div",{className:"card col-12"},u.a.createElement(e,null,u.a.createElement(v.a,null))):u.a.createElement("div",{className:"card col-12"},u.a.createElement(e,null,u.a.createElement(d.a,{loading:this.state.loading,movements:this.state.movements})),u.a.createElement(e,null,u.a.createElement(f.a,{loading:this.state.loading,months:this.state.months,sheetId:this.state.sheetId})))}}]),t}(c.Component);y.propTypes={match:g.a.shape({params:g.a.any}).isRequired},t.default=y}});
//# sourceMappingURL=3.17b1c7e7.chunk.js.map